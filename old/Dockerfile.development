# Auto-generated by weixin cloudbase vscode extension
FROM mcr.microsoft.com/dotnet/sdk:6.0-alpine AS build
RUN sed -i 's/dl-cdn.alpinelinux.org/mirrors.tencent.com/g' /etc/apk/repositories
WORKDIR /source
COPY *.sln .
COPY aspnetapp/*.csproj ./aspnetapp/
RUN dotnet restore -r linux-musl-x64 /p:PublishReadyToRun=true
COPY aspnetapp/. ./aspnetapp/
WORKDIR /source/aspnetapp
ENV ASPNETCORE_URLS http://0.0.0.0:80

CMD [ "dotnet", "watch" ]